第一章第一节 语句及程序结构
============================

原文作者：Alex

首次发布：2007 年 5 月 30 日

最近更新：2020 年 3 月 30 日

译者：Dominique Zhu

翻译时间：2021 年 2 月 4 日

原文链接： https://www.learncpp.com/cpp-tutorial/statements-and-the-structure-of-a-program/

章节介绍
---------

欢迎来到本教程的第一个主要章节！

在本章中，我们首先会聚焦对于每一个c++程序都至关重要的一些话题。由于需要讨论的主题数量较多，其中的大多数我们都只会非常浅显的涉猎（刚刚好明白）。本章的目的是帮助你理解基本的c++程序是如何构建的。到了本章结束时，你将会能够自己编写一些简单的程序。

在接下来的章节，我们将会再次提到这些主题，并且更加深入的探索他们。我们也将会介绍在这些基础上建立的新概念。

为了让课程的长度处于可以接受的范围，一个主题可能会分成几个连续的课程来讨论。如果你觉得一些重要的概念在某一课中没有讨论，那极有可能下一课中就会讨论到。

语句
-----

一个计算机程序是一个告诉计算机该做什么的指令序列。一个 **语句**\ 是一类令程序执行一些动作的指令。

语句是目前为止在c++程序中最普遍的一种指令。这是因为他们是c++语言中计算的最小独立单位。 也就是说，他们与句子在一门自然语言中扮演的角色大致相同。当我们想向他人传达一个想法时，我们一般会以句子的形式来说或者写（而不是以随机的单词或音节）。在c++中，当我们想让我们的程序做一些事情时，我们一般会书写语句。

大多数（但不是全部）c++中的语句以分号结尾，如果你看见一行代码以分号结尾，那他很有可能是一个语句。

在高级语言中，比如c++，一个语句可能被编译为多条机器语言指令。

.. topic:: 对于高级阅读者
	
	在c++中有许多种不同的语句：
		1. 声明语句
		2. 跳转语句
		3. 表达式语句
		4. 复合语句
		5. 选择语句（条件）
		6. 遍历语句（循环）
		7. Try块
	当你读完本系列教程，你将会明白上面的每一种语句是什么。

函数和主函数
------------

在c++中，语句通常被分组为一个一个的单元，我们称这些单元为函数。一个 **函数**\ 是顺序执行的语句的集合。当你学习编写自己的程序时，你也能够创建你自己的函数，并且以你自己开心的方式安排语句（我们将在以后的课程中展示）。

.. admonition:: 规则

	每一个c++程序都必须有一个特殊函数叫做 **main函数**\ （全小写）。当程序运行时，总是从main函数中的第一条语句开始执行，然后顺序的进行下去。

通常程序在执行完main函数的最后一个语句后停止（程序也可能由于一些情况过早的终止运行）。

函数一般是为一个特定的任务而生的。比如说，一个叫“最大值”的函数可能包含一些能够搞清楚两个数中哪一个更大的语句。一个叫 “计算成绩”的函数可能会从一对测试分数中计算学生的成绩。我们不久将会对于函数作进一步的讨论，因为它们是程序中最常用的组织工具。

.. topic:: 作者的注释

	当讨论函数时， 我们常常将括号写于函数名后面用以速记。举个例子，如果你看见诸如 :code:`main()` 或 :code:`doSomething()` 之类的术语，这就是main函数以及doSomething函数的速记形式。这样你在区分函数和其他对象（比如变量）时就不用每次都写“xx函数”了。

分解Hello World!
=================

现在你对于语句和函数又了简略的认识，我们来运行“Hello World”程序，然后对于每一行的作用进行更加深入且高层次的理解。

.. code-block:: C++
	:linenos:

	#include <iostream>
	 
	int main()
	{
	   std::cout << "Hello world!";
	   return 0;
	}

第一行是一类特殊的代码叫做预处理指令，这个预处理指令表明我们需要用到iostream库的内容，这属于c++标准库且让我们能够从控制台读写文本。我们需要这一行才能在第五行使用 :code:`std::cout` 。如果将这行删除，则会导致第五行产生编译错误，因为编译器会不知道啥是 :code:`std::cout`。

第二行是空行，并且会被编译器忽略，这一行的存在是为了让程序对于人来说可读性更高（将预处理指令与程序的剩下部分分开，看起来更舒适）。

第三行告诉编译器我们将会写（定义）一个叫做 *main*\的函数。就像你从上面学到的一样，每一个c++程序都必须有一个叫做 *main*\的函数，否则它会编译失败。

第四行与第七行告诉编译器哪些代码是 *main*\函数的部分。4行7行的封闭大括号内的所有东西都被看作 *main*\函数的一部分。这叫做函数体

第五行是 *main*\函数的第一条语句，并且也是我们程序运行时会执行的第一条语句。:code:`std::cout` (表示“字符输出”)以及 << 运算符让我们可以将字母或数字发送到控制台作为输出。在这份代码中，我们发送的是文本“Hello World”，它会在控制台输出。这个语句创建了本程序的可见输出。

第六行是一个返回语句，当一个可执行程序结束运行时，这个程序会向操作系统发送一个值来表明它是否成功运行。本程序中的这个语句向操作系统返回的是0，这意味着“一切顺利！”。这是程序中最后执行的语句。

我们所写的所有程序都将会按照这个通用的模版，或者在此基础上做一些改变。

。。 topic:: 作者的注释

	如果上面的解释有一部分（或者全部）对你来说很迷惑，没关系很正常。这只是一个快速的简介。后续的课程将会深入讨论上述的所有话题，并配以更多的解释和例子。

你可以自己编译并且运行这个程序，然后你会看到它在控制台输出如下内容：

:code:`Hello World!`

如果你在编译或者执行这个程序的过程中碰到问题，可以看看这个 :ref:`第零章第八节<第零章第八节 C++中一些常见问题>`。

小测验
--------

在介绍本节的最后一个内容前，这里有一些测试题来帮助你理解本节的材料，有一些题目的内容是关于还没有提到的本节最后一个内容，你可以先看题目，在看完最后一部分后回来一起完成小测验，小测验的答案将会在最后一个内容之后呈现。

第一题
>>>>>>>>>

什么是语句？

第二题
>>>>>>>>>

什么是函数？

第三题
>>>>>>>>>

每一个程序都要有的函数叫什么？

第四题
>>>>>>>>>

当程序开始运行时，他从哪里开始运行

第五题
>>>>>>>>>

C++中语句以什么符号结尾？

第六题
>>>>>>>>>

什么是语法错误？

第七题
>>>>>>>>>

什么是c++标准库？

语法错误
----------

在学校学习英文时你应该了解这样一回事儿，在英语中，句子会按照特定的语法规则来组织。比如说，一般的句子会以句号结尾。在语言中，用来规范句子组成的规则就叫语法（译者注：syntax）。如果你忘记了两个句子中间的句号让他们碰在了一块儿，那就违反了英语的语法。

c++也有语法：一套判定你构成程序的方式是否有效的规则。当你编译你的程序时，编译器会负责确保你的程序遵循基本的c++语法，如果你违反其中的一条规则，编译器会在编译时向你抱怨，并且向你提起一个 **syntax error(译者注：语法错误)**\ 

看看如果我们将Hello World程序中第五行的分号去掉会发生什么：

.. code-block:: C++
	:linenos:

	#include <iostream>
	 
	int main()
	{
	   std::cout << "Hello world!"
	   return 0;
	}

你也可以自己编译这个错误的程序。

Visual Studio 会产生以下的错误（你的编译器可能会产生不太一样的错误信息）：

:code:`c:\vcprojects\test1.cpp(6): error C2143: syntax error : missing ';' before 'return'`

这是在告诉你在第六行有一个语法错误：编译器本来以为返回语句之前会有一个分号，但是它没找着。虽然编译器会告诉你他在编译的时候是在哪一行遇到的语法错误，但是被省略的部分也有可能是在报错的上一行。在这份代码里，错误其实是由第五行引起的（编译器直到读到第六行才发现这个错误）。

编写程序时语法错误是挺常见的。幸运的是，它们一般很好找并且很好修复，因为编译器通常会直接告诉你他们在哪。程序的编译只有再所有语法错误都被纠正过后才能完成。

你可以尝试着在上面的代码中删除几个字母或者是一整行然后看看会出现哪些不一样的错误。尝试恢复第五行缺失的分号，然后删除第1，3或4行，看看会发生什么。

小测验答案
------------

第一题
>>>>>>>>>

什么是语句？

- 语句是一条告诉计算机执行一个动作的指令

第二题
>>>>>>>>>

什么是函数？

- 函数是一组顺序执行的语句

第三题
>>>>>>>>>

每一个程序都要有的函数叫什么？

- main函数

第四题
>>>>>>>>>

当程序开始运行时，他从哪里开始运行

- 从main函数的第一条语句开始

第五题
>>>>>>>>>

C++中语句以什么符号结尾？

- 分号（;）

第六题
>>>>>>>>>

什么是语法错误？

- 语法错误是在编译时由于你的程序违反了c++语言的语法规则而出现的编译错误

第七题
>>>>>>>>>

什么是c++标准库？

可以瞅瞅 :ref:`第零章第五节<第零章第五节 编译器，链接器和库的简介>`

- **库文件**\是一系列预先编译好的代码，他们被“打包”在一起这样其他程序能够重复使用。c++标准库是一个和c++捆绑销售的库，它包含了一些额外的你可以用到的功能。











